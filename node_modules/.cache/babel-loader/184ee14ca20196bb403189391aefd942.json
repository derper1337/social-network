{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _objectSpread from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import{usersAPI}from\"../ api/api\";var initValue={users:[],pageInfo:{pageCount:8,pageSize:5,currentPage:1,isLoading:true,isFollowing:[]}};var usersReducer=function usersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initValue;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case\"FOLLOW\":{var stateCopy=_objectSpread({},state);stateCopy.users=_toConsumableArray(state.users);stateCopy.users.map(function(u){if(u.id==action.userId){u.followed=true;}});return stateCopy;}case\"UNFOLLOW\":{var _stateCopy=_objectSpread({},state);_stateCopy.users=_toConsumableArray(state.users);_stateCopy.users.map(function(u){if(u.id==action.userId){u.followed=false;}});return _stateCopy;}case\"SET-CURRENT-PAGE\":{var _stateCopy2=_objectSpread({},state);_stateCopy2.pageInfo=_objectSpread({},state.pageInfo);_stateCopy2.pageInfo.currentPage=action.currentPage;return _stateCopy2;}case\"SET-USERS\":{var _stateCopy3=_objectSpread({},state);_stateCopy3.users=_toConsumableArray(action.users);_stateCopy3.pageInfo.pageCount=action.pageCount;return _stateCopy3;}case\"IS-LOADING\":{var _stateCopy4=_objectSpread({},state);_stateCopy4.pageInfo=_objectSpread({},state.pageInfo);_stateCopy4.pageInfo.isLoading=action.isLoading;return _stateCopy4;}case\"IS-FOLLOWING\":{return _objectSpread(_objectSpread({},state),{},{pageInfo:_objectSpread(_objectSpread({},state.pageInfo),{},{isFollowing:action.isFollowing?[].concat(_toConsumableArray(state.pageInfo.isFollowing),[action.userId]):state.pageInfo.isFollowing.filter(function(id){return id!=action.userId;})})});}default:return state;}};export var follow=function follow(userId){return{type:\"FOLLOW\",userId:userId};};export var unfollow=function unfollow(userId){return{type:\"UNFOLLOW\",userId:userId};};export var setUsers=function setUsers(users,pageCount){return{type:\"SET-USERS\",users:users,pageCount:pageCount};};export var setCurrentPage=function setCurrentPage(currentPage){return{type:\"SET-CURRENT-PAGE\",currentPage:currentPage};};export var isLoading=function isLoading(_isLoading){return{type:\"IS-LOADING\",isLoading:_isLoading};};export var isFollowing=function isFollowing(_isFollowing,userId){return{type:\"IS-FOLLOWING\",isFollowing:_isFollowing,userId:userId};};export var getUsersThunkCreator=function getUsersThunkCreator(currentPage,pageSize){return function(dispatch){dispatch(isLoading(true));dispatch(setCurrentPage(currentPage));usersAPI.getUsersPage(currentPage,pageSize).then(function(data){dispatch(setUsers(data.items,data.totalCount));dispatch(isLoading(false));});};};export var searchUsersThunkCreator=function searchUsersThunkCreator(userName){return function(dispatch){dispatch(isLoading(true));usersAPI.searchUser(userName).then(function(data){dispatch(setUsers(data.items,data.totalCount));dispatch(isLoading(false));});};};export var unfollowThunkCreator=function unfollowThunkCreator(userId){return function(dispatch){dispatch(isFollowing(true,userId));usersAPI.sendUnfollowRequest(userId).then(function(data){if(data.resultCode===0){dispatch(unfollow(userId));dispatch(isFollowing(false,userId));}});};};export var followThunkCreator=function followThunkCreator(userId){return function(dispatch){dispatch(isFollowing(true,userId));usersAPI.sendFollowRequest(userId).then(function(data){if(data.resultCode===0){dispatch(follow(userId));dispatch(isFollowing(false,userId));}});};};export default usersReducer;","map":{"version":3,"sources":["C:/Users/Philippos/Documents/WebDev/ULTRA_REACT/01/src/Redux/users-reducer.js"],"names":["usersAPI","initValue","users","pageInfo","pageCount","pageSize","currentPage","isLoading","isFollowing","usersReducer","state","action","type","stateCopy","map","u","id","userId","followed","filter","follow","unfollow","setUsers","setCurrentPage","getUsersThunkCreator","dispatch","getUsersPage","then","data","items","totalCount","searchUsersThunkCreator","userName","searchUser","unfollowThunkCreator","sendUnfollowRequest","resultCode","followThunkCreator","sendFollowRequest"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../ api/api\";\r\n\r\nlet initValue = {\r\n        users: [],\r\n        pageInfo: {\r\n            pageCount: 8,\r\n            pageSize: 5,\r\n            currentPage: 1,\r\n            isLoading: true,\r\n            isFollowing: [],\r\n        },\r\n    }\r\n\r\nconst usersReducer = (state = initValue, action) => {\r\n    switch (action.type) {\r\n        case \"FOLLOW\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.users = [...state.users];\r\n            stateCopy.users.map(u => {\r\n                if (u.id == action.userId) {\r\n                    u.followed = true;\r\n                }\r\n            })\r\n            return stateCopy;\r\n        }\r\n        case \"UNFOLLOW\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.users = [...state.users];\r\n            stateCopy.users.map(u => {\r\n                if (u.id == action.userId) {\r\n                    u.followed = false\r\n                }\r\n            })\r\n            return stateCopy;\r\n        }\r\n        case \"SET-CURRENT-PAGE\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.pageInfo = {...state.pageInfo};\r\n            stateCopy.pageInfo.currentPage = action.currentPage;\r\n            return stateCopy;\r\n        }\r\n        case \"SET-USERS\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.users = [...action.users];\r\n            stateCopy.pageInfo.pageCount = action.pageCount;\r\n            return stateCopy;\r\n        }\r\n        case \"IS-LOADING\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.pageInfo = {...state.pageInfo};\r\n            stateCopy.pageInfo.isLoading = action.isLoading;\r\n            return stateCopy;\r\n        }\r\n        case \"IS-FOLLOWING\": {\r\n            return {\r\n                ...state,\r\n                pageInfo: {\r\n                    ...state.pageInfo,\r\n                    isFollowing: action.isFollowing\r\n                        ? [...state.pageInfo.isFollowing, action.userId]\r\n                        : state.pageInfo.isFollowing.filter(id => id != action.userId)\r\n                },\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const follow = (userId) => ({type: \"FOLLOW\", userId: userId});\r\nexport const unfollow = (userId) => ({type: \"UNFOLLOW\", userId: userId});\r\nexport const setUsers = (users, pageCount) => ({type: \"SET-USERS\", users: users, pageCount: pageCount});\r\nexport const setCurrentPage = (currentPage) => ({type: \"SET-CURRENT-PAGE\", currentPage: currentPage});\r\nexport const isLoading = (isLoading) => ({type: \"IS-LOADING\", isLoading: isLoading})\r\nexport const isFollowing = (isFollowing, userId) => ({type: \"IS-FOLLOWING\",isFollowing: isFollowing,userId: userId})\r\n\r\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\r\n    return (dispatch) => {\r\n        dispatch(isLoading(true));\r\n        dispatch(setCurrentPage(currentPage));\r\n        usersAPI.getUsersPage(currentPage, pageSize)\r\n            .then(data => {\r\n                dispatch(setUsers(data.items, data.totalCount));\r\n                dispatch(isLoading(false));\r\n            });\r\n    }\r\n}\r\nexport const searchUsersThunkCreator = (userName) => {\r\n    return (dispatch) => {\r\n        dispatch(isLoading(true));\r\n        usersAPI.searchUser(userName)\r\n            .then(data => {\r\n                dispatch(setUsers(data.items, data.totalCount));\r\n                dispatch(isLoading(false));\r\n            });\r\n    }\r\n}\r\n\r\nexport const unfollowThunkCreator = (userId) => {\r\n    return (dispatch) => {\r\n            dispatch(isFollowing(true, userId));\r\n            usersAPI.sendUnfollowRequest(userId).then(data => {\r\n                if (data.resultCode === 0) {\r\n                    dispatch(unfollow(userId));\r\n                    dispatch(isFollowing(false, userId));\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const followThunkCreator = (userId) => {\r\n    return (dispatch) => {\r\n        dispatch(isFollowing(true, userId));\r\n        usersAPI.sendFollowRequest(userId).then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(follow(userId));\r\n                dispatch(isFollowing(false, userId));\r\n            }\r\n        });\r\n    }\r\n}\r\nexport default usersReducer;"]},"metadata":{},"sourceType":"module"}