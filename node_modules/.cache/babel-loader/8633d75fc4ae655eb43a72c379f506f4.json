{"ast":null,"code":"import { usersAPI, authAPI } from \"../ api/api\";\nlet initValue = {\n  id: null,\n  email: null,\n  login: null,\n  loggedIn: false\n};\n\nconst authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initValue;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"SET-AUTH\":\n      {\n        let stateCopy = { ...state,\n          ...action.loginData,\n          loggedIn: true\n        };\n        return stateCopy;\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const setAuth = loginData => ({\n  type: \"SET-AUTH\",\n  loginData: loginData\n});\nexport const setAuthThunkCreator = () => {\n  return dispatch => {\n    usersAPI.getAuthMe().then(data => {\n      if (data.resultCode === 0) {\n        let loginData = data.data;\n        dispatch(setAuth(loginData));\n      }\n    });\n  };\n};\nexport const loginThunkCreator = (email, password, rememberMe) => {\n  return dispatch => {\n    authAPI.login(email, password, rememberMe).then(response => {\n      if (response.data.resultCode === 0) {\n        dispatch(setAuthThunkCreator());\n      }\n    });\n  };\n};\nexport const logoutThunkCreator = (email, password, rememberMe) => {\n  return dispatch => {\n    authAPI.logout().then(response => {\n      if (response.data.resultCode === 0) {\n        dispatch(setAuthThunkCreator());\n      }\n    });\n  };\n};\nexport default authReducer;","map":{"version":3,"sources":["C:/Users/Philippos/Documents/WebDev/ULTRA_REACT/01/src/Redux/auth-reducer.js"],"names":["usersAPI","authAPI","initValue","id","email","login","loggedIn","authReducer","state","action","type","stateCopy","loginData","setAuth","setAuthThunkCreator","dispatch","getAuthMe","then","data","resultCode","loginThunkCreator","password","rememberMe","response","logoutThunkCreator","logout"],"mappings":"AAAA,SAAQA,QAAR,EAAkBC,OAAlB,QAAgC,aAAhC;AAEA,IAAIC,SAAS,GAAG;AACZC,EAAAA,EAAE,EAAE,IADQ;AAEZC,EAAAA,KAAK,EAAE,IAFK;AAGZC,EAAAA,KAAK,EAAE,IAHK;AAIZC,EAAAA,QAAQ,EAAE;AAJE,CAAhB;;AAMA,MAAMC,WAAW,GAAG,YAA+B;AAAA,MAA9BC,KAA8B,uEAAtBN,SAAsB;AAAA,MAAXO,MAAW;;AAE/C,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,UAAL;AAAiB;AACb,YAAIC,SAAS,GAAG,EACZ,GAAGH,KADS;AAEZ,aAAGC,MAAM,CAACG,SAFE;AAGZN,UAAAA,QAAQ,EAAE;AAHE,SAAhB;AAKA,eAAOK,SAAP;AACH;;AACD;AACI,aAAOH,KAAP;AAVR;AAYH,CAdD;;AAeA,OAAO,MAAMK,OAAO,GAAID,SAAD,KAAgB;AAACF,EAAAA,IAAI,EAAE,UAAP;AAAmBE,EAAAA,SAAS,EAAEA;AAA9B,CAAhB,CAAhB;AAEP,OAAO,MAAME,mBAAmB,GAAG,MAAK;AACpC,SAAQC,QAAD,IAAa;AAChBf,IAAAA,QAAQ,CAACgB,SAAT,GACKC,IADL,CACUC,IAAI,IAAI;AACV,UAAIA,IAAI,CAACC,UAAL,KAAoB,CAAxB,EAA2B;AACvB,YAAIP,SAAS,GAAGM,IAAI,CAACA,IAArB;AACAH,QAAAA,QAAQ,CAACF,OAAO,CAACD,SAAD,CAAR,CAAR;AACH;AACJ,KANL;AAOH,GARD;AASH,CAVM;AAYP,OAAO,MAAMQ,iBAAiB,GAAG,CAAChB,KAAD,EAAQiB,QAAR,EAAkBC,UAAlB,KAAgC;AAC7D,SAAQP,QAAD,IAAa;AAChBd,IAAAA,OAAO,CAACI,KAAR,CAAcD,KAAd,EAAqBiB,QAArB,EAA+BC,UAA/B,EACKL,IADL,CACUM,QAAQ,IAAG;AACb,UAAIA,QAAQ,CAACL,IAAT,CAAcC,UAAd,KAA6B,CAAjC,EAAmC;AAC/BJ,QAAAA,QAAQ,CAACD,mBAAmB,EAApB,CAAR;AACH;AACJ,KALL;AAMH,GAPD;AAQH,CATM;AAUP,OAAO,MAAMU,kBAAkB,GAAG,CAACpB,KAAD,EAAQiB,QAAR,EAAkBC,UAAlB,KAAgC;AAC9D,SAAQP,QAAD,IAAa;AAChBd,IAAAA,OAAO,CAACwB,MAAR,GACKR,IADL,CACUM,QAAQ,IAAG;AACb,UAAIA,QAAQ,CAACL,IAAT,CAAcC,UAAd,KAA6B,CAAjC,EAAmC;AAC/BJ,QAAAA,QAAQ,CAACD,mBAAmB,EAApB,CAAR;AACH;AACJ,KALL;AAMH,GAPD;AAQH,CATM;AAWP,eAAeP,WAAf","sourcesContent":["import {usersAPI, authAPI} from \"../ api/api\";\r\n\r\nlet initValue = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    loggedIn: false,\r\n};\r\nconst authReducer = (state = initValue, action) => {\r\n\r\n    switch (action.type) {\r\n        case \"SET-AUTH\": {\r\n            let stateCopy = {\r\n                ...state,\r\n                ...action.loginData,\r\n                loggedIn: true,\r\n            }\r\n            return stateCopy;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport const setAuth = (loginData) => ({type: \"SET-AUTH\", loginData: loginData});\r\n\r\nexport const setAuthThunkCreator = () =>{\r\n    return (dispatch) =>{\r\n        usersAPI.getAuthMe()\r\n            .then(data => {\r\n                if (data.resultCode === 0) {\r\n                    let loginData = data.data;\r\n                    dispatch(setAuth(loginData));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const loginThunkCreator = (email, password, rememberMe) =>{\r\n    return (dispatch) =>{\r\n        authAPI.login(email, password, rememberMe)\r\n            .then(response =>{\r\n                if (response.data.resultCode === 0){\r\n                    dispatch(setAuthThunkCreator());\r\n                }\r\n            })\r\n    }\r\n}\r\nexport const logoutThunkCreator = (email, password, rememberMe) =>{\r\n    return (dispatch) =>{\r\n        authAPI.logout()\r\n            .then(response =>{\r\n                if (response.data.resultCode === 0){\r\n                    dispatch(setAuthThunkCreator());\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport default authReducer;"]},"metadata":{},"sourceType":"module"}