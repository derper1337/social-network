{"ast":null,"code":"import { usersAPI } from \"../ api/api\";\nlet initValue = {\n  users: [],\n  pageInfo: {\n    pageCount: 8,\n    pageSize: 5,\n    currentPage: 1,\n    isLoading: true,\n    isFollowing: []\n  }\n};\n\nconst usersReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initValue;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"FOLLOW\":\n      {\n        let stateCopy = { ...state\n        };\n        stateCopy.users = [...state.users];\n        stateCopy.users.map(u => {\n          if (u.id == action.userId) {\n            u.followed = true;\n          }\n        });\n        return stateCopy;\n      }\n\n    case \"UNFOLLOW\":\n      {\n        let stateCopy = { ...state\n        };\n        stateCopy.users = [...state.users];\n        stateCopy.users.map(u => {\n          if (u.id == action.userId) {\n            u.followed = false;\n          }\n        });\n        return stateCopy;\n      }\n\n    case \"SET-CURRENT-PAGE\":\n      {\n        let stateCopy = { ...state\n        };\n        stateCopy.pageInfo = { ...state.pageInfo\n        };\n        stateCopy.pageInfo.currentPage = action.currentPage;\n        return stateCopy;\n      }\n\n    case \"SET-USERS\":\n      {\n        let stateCopy = { ...state\n        };\n        stateCopy.users = [...action.users];\n        stateCopy.pageInfo.pageCount = action.pageCount;\n        return stateCopy;\n      }\n\n    case \"IS-LOADING\":\n      {\n        let stateCopy = { ...state\n        };\n        stateCopy.pageInfo = { ...state.pageInfo\n        };\n        stateCopy.pageInfo.isLoading = action.isLoading;\n        return stateCopy;\n      }\n\n    case \"IS-FOLLOWING\":\n      {\n        return { ...state,\n          pageInfo: { ...state.pageInfo,\n            isFollowing: action.isFollowing ? [...state.pageInfo.isFollowing, action.userId] : state.pageInfo.isFollowing.filter(id => id != action.userId)\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const follow = userId => ({\n  type: \"FOLLOW\",\n  userId: userId\n});\nexport const unfollow = userId => ({\n  type: \"UNFOLLOW\",\n  userId: userId\n});\nexport const setUsers = (users, pageCount) => ({\n  type: \"SET-USERS\",\n  users: users,\n  pageCount: pageCount\n});\nexport const setCurrentPage = currentPage => ({\n  type: \"SET-CURRENT-PAGE\",\n  currentPage: currentPage\n});\nexport const isLoading = isLoading => ({\n  type: \"IS-LOADING\",\n  isLoading: isLoading\n});\nexport const isFollowing = (isFollowing, userId) => ({\n  type: \"IS-FOLLOWING\",\n  isFollowing: isFollowing,\n  userId: userId\n});\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\n  return dispatch => {\n    dispatch(isLoading(true));\n    dispatch(setCurrentPage(currentPage));\n    usersAPI.getUsersPage(currentPage, pageSize).then(data => {\n      dispatch(setUsers(data.items, data.totalCount));\n      dispatch(isLoading(false));\n    });\n  };\n};\nexport const SearchUsersThunkCreator = userName => {\n  return dispatch => {\n    dispatch(isLoading(true));\n    usersAPI.getUsersPage(currentPage, pageSize).then(data => {\n      dispatch(setUsers(data.items, data.totalCount));\n      dispatch(isLoading(false));\n    });\n  };\n};\n_c = SearchUsersThunkCreator;\nexport const unfollowThunkCreator = userId => {\n  return dispatch => {\n    dispatch(isFollowing(true, userId));\n    usersAPI.sendUnfollowRequest(userId).then(data => {\n      if (data.resultCode === 0) {\n        dispatch(unfollow(userId));\n        dispatch(isFollowing(false, userId));\n      }\n    });\n  };\n};\nexport const followThunkCreator = userId => {\n  return dispatch => {\n    dispatch(isFollowing(true, userId));\n    usersAPI.sendFollowRequest(userId).then(data => {\n      if (data.resultCode === 0) {\n        dispatch(follow(userId));\n        dispatch(isFollowing(false, userId));\n      }\n    });\n  };\n};\nexport default usersReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchUsersThunkCreator\");","map":{"version":3,"sources":["C:/Users/Philippos/Documents/WebDev/ULTRA_REACT/01/src/Redux/users-reducer.js"],"names":["usersAPI","initValue","users","pageInfo","pageCount","pageSize","currentPage","isLoading","isFollowing","usersReducer","state","action","type","stateCopy","map","u","id","userId","followed","filter","follow","unfollow","setUsers","setCurrentPage","getUsersThunkCreator","dispatch","getUsersPage","then","data","items","totalCount","SearchUsersThunkCreator","userName","unfollowThunkCreator","sendUnfollowRequest","resultCode","followThunkCreator","sendFollowRequest"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../ api/api\";\r\n\r\nlet initValue = {\r\n        users: [],\r\n        pageInfo: {\r\n            pageCount: 8,\r\n            pageSize: 5,\r\n            currentPage: 1,\r\n            isLoading: true,\r\n            isFollowing: [],\r\n        },\r\n    }\r\n\r\nconst usersReducer = (state = initValue, action) => {\r\n    switch (action.type) {\r\n        case \"FOLLOW\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.users = [...state.users];\r\n            stateCopy.users.map(u => {\r\n                if (u.id == action.userId) {\r\n                    u.followed = true;\r\n                }\r\n            })\r\n            return stateCopy;\r\n        }\r\n        case \"UNFOLLOW\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.users = [...state.users];\r\n            stateCopy.users.map(u => {\r\n                if (u.id == action.userId) {\r\n                    u.followed = false\r\n                }\r\n            })\r\n            return stateCopy;\r\n        }\r\n        case \"SET-CURRENT-PAGE\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.pageInfo = {...state.pageInfo};\r\n            stateCopy.pageInfo.currentPage = action.currentPage;\r\n            return stateCopy;\r\n        }\r\n        case \"SET-USERS\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.users = [...action.users];\r\n            stateCopy.pageInfo.pageCount = action.pageCount;\r\n            return stateCopy;\r\n        }\r\n        case \"IS-LOADING\": {\r\n            let stateCopy = {...state};\r\n            stateCopy.pageInfo = {...state.pageInfo};\r\n            stateCopy.pageInfo.isLoading = action.isLoading;\r\n            return stateCopy;\r\n        }\r\n        case \"IS-FOLLOWING\": {\r\n            return {\r\n                ...state,\r\n                pageInfo: {\r\n                    ...state.pageInfo,\r\n                    isFollowing: action.isFollowing\r\n                        ? [...state.pageInfo.isFollowing, action.userId]\r\n                        : state.pageInfo.isFollowing.filter(id => id != action.userId)\r\n                },\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const follow = (userId) => ({type: \"FOLLOW\", userId: userId});\r\nexport const unfollow = (userId) => ({type: \"UNFOLLOW\", userId: userId});\r\nexport const setUsers = (users, pageCount) => ({type: \"SET-USERS\", users: users, pageCount: pageCount});\r\nexport const setCurrentPage = (currentPage) => ({type: \"SET-CURRENT-PAGE\", currentPage: currentPage});\r\nexport const isLoading = (isLoading) => ({type: \"IS-LOADING\", isLoading: isLoading})\r\nexport const isFollowing = (isFollowing, userId) => ({type: \"IS-FOLLOWING\",isFollowing: isFollowing,userId: userId})\r\n\r\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\r\n    return (dispatch) => {\r\n        dispatch(isLoading(true));\r\n        dispatch(setCurrentPage(currentPage));\r\n        usersAPI.getUsersPage(currentPage, pageSize)\r\n            .then(data => {\r\n                dispatch(setUsers(data.items, data.totalCount));\r\n                dispatch(isLoading(false));\r\n            });\r\n    }\r\n}\r\nexport const SearchUsersThunkCreator = (userName) => {\r\n    return (dispatch) => {\r\n        dispatch(isLoading(true));\r\n        usersAPI.getUsersPage(currentPage, pageSize)\r\n            .then(data => {\r\n                dispatch(setUsers(data.items, data.totalCount));\r\n                dispatch(isLoading(false));\r\n            });\r\n    }\r\n}\r\n\r\nexport const unfollowThunkCreator = (userId) => {\r\n    return (dispatch) => {\r\n            dispatch(isFollowing(true, userId));\r\n            usersAPI.sendUnfollowRequest(userId).then(data => {\r\n                if (data.resultCode === 0) {\r\n                    dispatch(unfollow(userId));\r\n                    dispatch(isFollowing(false, userId));\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const followThunkCreator = (userId) => {\r\n    return (dispatch) => {\r\n        dispatch(isFollowing(true, userId));\r\n        usersAPI.sendFollowRequest(userId).then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(follow(userId));\r\n                dispatch(isFollowing(false, userId));\r\n            }\r\n        });\r\n    }\r\n}\r\nexport default usersReducer;"]},"metadata":{},"sourceType":"module"}