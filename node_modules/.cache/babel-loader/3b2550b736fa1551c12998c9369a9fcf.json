{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _classCallCheck from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";import _createClass from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";import _inherits from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\inherits.js\";import _createSuper from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createSuper.js\";import css from\"./Profile.module.css\";import React,{PureComponent,useEffect,useState}from\"react\";import Preloader from\"../../common/preloader/preloader\";import{updateAvatarThunkCreator}from\"../../../Redux/profileReducer\";import AddFriendButton from\"../../common/images/AddFriend.png\";import OkButton from\"../../common/images/ok.png\";import SettingsButton from\"../../common/images/Settings.png\";import ChangeAvaButton from\"../../common/images/ChangeAvatar.png\";import MessageButton from\"../../common/images/Message.png\";import SendPostButton from\"../../common/images/send.png\";import{Transition}from'react-transition-group';import NoAvatarPicture from\"../../common/images/User.png\";import{useNavigate}from\"react-router\";import Messages from\"../Messages/Messages\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(props){return/*#__PURE__*/_jsxs(\"div\",{className:css.Post,children:[/*#__PURE__*/_jsx(\"img\",{width:\"60px\",src:props.profileInfo.profile.photos.small?props.profileInfo.profile.photos.small:NoAvatarPicture}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:props.profileInfo.profile.fullName}),/*#__PURE__*/_jsx(\"p\",{children:props.text})]})]});};var ProfileStatus=/*#__PURE__*/function(_PureComponent){_inherits(ProfileStatus,_PureComponent);var _super=_createSuper(ProfileStatus);function ProfileStatus(){var _this;_classCallCheck(this,ProfileStatus);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={editMode:false,status:_this.props.status};_this.onStatusChange=function(e){_this.setState({status:e.currentTarget.value});};return _this;}_createClass(ProfileStatus,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.status!==this.props.status){this.setState({status:this.props.status});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\" \",this.state.editMode?/*#__PURE__*/_jsx(\"input\",{onChange:this.onStatusChange,value:this.state.status,onBlur:function onBlur(){_this2.setState({editMode:false});_this2.props.updateStatus(_this2.state.status);}}):/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.setState({editMode:true});},children:this.props.status||\"no status\"})]})});}}]);return ProfileStatus;}(PureComponent);var idCrutch=0;var Profile=function Profile(props){var unfollow=function unfollow(userId){props.unfollowThunkCreator(userId);};var follow=function follow(userId){props.followThunkCreator(userId);};var postElements=props.ProfileData.posts.map(function(p){return/*#__PURE__*/_jsx(Post,{profileInfo:props.ProfileData,text:p.text},idCrutch++);});var text=/*#__PURE__*/React.createRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editMode=_useState2[0],setEditMode=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),localProfile=_useState4[0],setLocalProfile=_useState4[1];useEffect(function(){setLocalProfile(_objectSpread({},props.ProfileData.profile));},[props.ProfileData.profile]);var navigate=useNavigate();if(!props.ProfileData.profile){return/*#__PURE__*/_jsx(Preloader,{});}return/*#__PURE__*/_jsxs(\"div\",{className:css.Profile,children:[/*#__PURE__*/_jsxs(\"div\",{className:css.Columns,children:[/*#__PURE__*/_jsxs(\"div\",{className:css.LeftColumn,children:[/*#__PURE__*/_jsx(\"img\",{className:css.ProfilePicture,src:props.ProfileData.profile.photos.large?props.ProfileData.profile.photos.large:NoAvatarPicture}),/*#__PURE__*/_jsx(\"div\",{className:css.UnderPicture,children:props.myId===props.userId?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"button\",{className:css.UserButton,onClick:function onClick(){if(editMode)props.updateProfileThunkCreator(localProfile);setEditMode(!editMode);},children:[\" \",editMode?/*#__PURE__*/_jsx(\"img\",{width:\"40px\",src:OkButton}):/*#__PURE__*/_jsx(\"img\",{width:\"40px\",src:SettingsButton})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"avatar\",className:css.Label,children:[/*#__PURE__*/_jsx(\"img\",{width:\"40px\",src:ChangeAvaButton}),/*#__PURE__*/_jsx(\"input\",{className:css.AvatarInput,type:\"file\",id:\"avatar\",onChange:function onChange(){var avatar=document.getElementById('avatar').files[0];props.updateAvatarThunkCreator(avatar);}})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return follow(localProfile.userId);},className:css.UserButton,children:/*#__PURE__*/_jsx(\"img\",{width:\"40px\",src:AddFriendButton})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){follow(localProfile.userId);navigate(\"/messages/\"+localProfile.fullName);},className:css.UserButton,children:/*#__PURE__*/_jsx(\"img\",{width:\"40px\",src:MessageButton})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.RightColumn,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:css.Name,children:props.ProfileData.profile.fullName})}),/*#__PURE__*/_jsx(\"div\",{className:css.Status,children:/*#__PURE__*/_jsx(ProfileStatus,{status:props.ProfileData.status,updateStatus:props.updateStatus})}),/*#__PURE__*/_jsxs(\"div\",{className:css.Info,children:[/*#__PURE__*/_jsxs(\"div\",{className:css.AboutMe,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:\"About me:\"}),editMode?/*#__PURE__*/_jsx(\"input\",{className:css.AboutMeInput,style:{display:\"inline\"},onChange:function onChange(event){setLocalProfile(_objectSpread(_objectSpread({},localProfile),{},{aboutMe:event.currentTarget.value}));},type:\"text\",value:localProfile.aboutMe||\"\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:localProfile.aboutMe?/*#__PURE__*/_jsx(\"span\",{children:localProfile.aboutMe}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.LookingForAJob,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:\"Looking for a Job:\"}),editMode?/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(){setLocalProfile(_objectSpread(_objectSpread({},localProfile),{},{lookingForAJob:!localProfile.lookingForAJob,lookingForAJobDescription:\"nothing here\"}));},type:\"checkbox\",checked:localProfile.lookingForAJob}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:localProfile.lookingForAJob?/*#__PURE__*/_jsx(\"span\",{children:\"yes\"}):/*#__PURE__*/_jsx(\"span\",{children:\"no\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.Contacts,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:\"vk: \"}),editMode?/*#__PURE__*/_jsx(\"input\",{style:{display:\"inline\"},onChange:function onChange(event){setLocalProfile(_objectSpread(_objectSpread({},localProfile),{},{contacts:_objectSpread(_objectSpread({},localProfile.contacts),{},{vk:event.currentTarget.value})}));},type:\"text\",value:localProfile.contacts.vk||\"\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:localProfile.contacts?localProfile.contacts.vk?/*#__PURE__*/_jsx(\"span\",{children:localProfile.contacts.vk}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.Contacts,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:\"github: \"}),editMode?/*#__PURE__*/_jsx(\"input\",{style:{display:\"inline\"},onChange:function onChange(event){setLocalProfile(_objectSpread(_objectSpread({},localProfile),{},{contacts:_objectSpread(_objectSpread({},localProfile.contacts),{},{github:event.currentTarget.value})}));},type:\"text\",value:localProfile.contacts.github||\"\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:localProfile.contacts?localProfile.contacts.github?/*#__PURE__*/_jsx(\"span\",{children:localProfile.contacts.github}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.Contacts,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:\"website: \"}),editMode?/*#__PURE__*/_jsx(\"input\",{style:{display:\"inline\"},onChange:function onChange(event){setLocalProfile(_objectSpread(_objectSpread({},localProfile),{},{contacts:_objectSpread(_objectSpread({},localProfile.contacts),{},{website:event.currentTarget.value})}));},type:\"text\",value:localProfile.contacts.website||\"\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline\"},children:localProfile.contacts?localProfile.contacts.website?/*#__PURE__*/_jsx(\"span\",{children:localProfile.contacts.website}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"}):/*#__PURE__*/_jsx(\"span\",{children:\"no info\"})})]})]})]})]}),props.myId===props.userId?/*#__PURE__*/_jsxs(\"div\",{className:css.PostMenu,children:[/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(){return props.textareaChange(text);},ref:text,value:props.ProfileData.newPostText.text}),/*#__PURE__*/_jsx(\"button\",{className:css.AddPostButton,onClick:function onClick(){props.addPost();},children:/*#__PURE__*/_jsx(\"img\",{src:SendPostButton,width:\"40px\"})})]}):null,/*#__PURE__*/_jsx(\"div\",{className:css.MyPosts,children:postElements})]});// return (\n//     <div className={css.Profile}>\n//         <div className={css.ProfileName}>{props.ProfileData.profile.fullName}</div>\n//         <img className={css.ProfilePicture}\n//              src={props.ProfileData.profile.photos.large}/>\n//         <br/>\n//         <div>\n//             {props.isOwner && <input type={\"file\"}/>}\n//         </div>\n//         <ProfileStatus status={props.ProfileData.status} updateStatus={props.updateStatus}/>\n//         <br/>\n//         <textarea onChange={() => props.textareaChange(text)}\n//                   ref={text}\n//                   value={props.ProfileData.newPostText.text}>\n//         </textarea>\n//         <br/>\n//         <button onClick={() => {\n//             props.addPost();\n//         }}>Add new post\n//         </button>\n//         <br/>\n//         <div className={css.MyPosts}>\n//             {postElements}\n//         </div>\n//     </div>);\n};export default Profile;","map":{"version":3,"sources":["C:/Users/Philippos/Documents/WebDev/ULTRA_REACT/01/src/components/Content/Profile/Profile.js"],"names":["css","React","PureComponent","useEffect","useState","Preloader","updateAvatarThunkCreator","AddFriendButton","OkButton","SettingsButton","ChangeAvaButton","MessageButton","SendPostButton","Transition","NoAvatarPicture","useNavigate","Messages","Post","props","profileInfo","profile","photos","small","fullName","text","ProfileStatus","state","editMode","status","onStatusChange","e","setState","currentTarget","value","prevProps","prevState","updateStatus","idCrutch","Profile","unfollow","userId","unfollowThunkCreator","follow","followThunkCreator","postElements","ProfileData","posts","map","p","createRef","setEditMode","localProfile","setLocalProfile","navigate","Columns","LeftColumn","ProfilePicture","large","UnderPicture","myId","display","justifyContent","UserButton","updateProfileThunkCreator","Label","AvatarInput","avatar","document","getElementById","files","RightColumn","Name","Status","Info","AboutMe","AboutMeInput","event","aboutMe","LookingForAJob","lookingForAJob","lookingForAJobDescription","Contacts","contacts","vk","github","website","PostMenu","textareaChange","newPostText","AddPostButton","addPost","MyPosts"],"mappings":"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","sourcesContent":["import css from \"./Profile.module.css\"\r\nimport React, {PureComponent, useEffect, useState} from \"react\";\r\nimport Preloader from \"../../common/preloader/preloader\";\r\nimport {updateAvatarThunkCreator} from \"../../../Redux/profileReducer\";\r\nimport AddFriendButton from \"../../common/images/AddFriend.png\"\r\nimport OkButton from \"../../common/images/ok.png\"\r\nimport SettingsButton from \"../../common/images/Settings.png\"\r\nimport ChangeAvaButton from \"../../common/images/ChangeAvatar.png\"\r\nimport MessageButton from \"../../common/images/Message.png\"\r\nimport SendPostButton from \"../../common/images/send.png\"\r\nimport { Transition } from 'react-transition-group';\r\nimport NoAvatarPicture from \"../../common/images/User.png\"\r\nimport {useNavigate} from \"react-router\";\r\nimport Messages from \"../Messages/Messages\";\r\n\r\n\r\nconst Post = (props) => {\r\n    return <div className={css.Post}>\r\n        <img width={\"60px\"} src={props.profileInfo.profile.photos.small\r\n            ? props.profileInfo.profile.photos.small\r\n            : NoAvatarPicture\r\n        }/>\r\n        <div>\r\n            <span>{props.profileInfo.profile.fullName}</span>\r\n            <p>{props.text}</p>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nclass ProfileStatus extends PureComponent {\r\n    state = {\r\n        editMode: false, status: this.props.status,\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.status !== this.props.status) {\r\n            this.setState({status: this.props.status})\r\n        }\r\n    }\r\n\r\n    onStatusChange = (e) => {\r\n        this.setState({status: e.currentTarget.value})\r\n    }\r\n\r\n    render() {\r\n        return (<div>\r\n            <div> {this.state.editMode ? <input onChange={this.onStatusChange} value={this.state.status} onBlur={() => {\r\n                this.setState({editMode: false});\r\n                this.props.updateStatus(this.state.status);\r\n            }}/> : <div onClick={() => {\r\n                this.setState({editMode: true});\r\n            }}>{this.props.status || \"no status\"}</ div>}\r\n            </div>\r\n        </div>)\r\n    }\r\n}\r\nlet idCrutch = 0;\r\n\r\n\r\nconst Profile = (props) => {\r\n\r\n    let unfollow = (userId) => {\r\n        props.unfollowThunkCreator(userId);\r\n    }\r\n    let follow = (userId) => {\r\n        props.followThunkCreator(userId);\r\n    }\r\n\r\n    let postElements = props.ProfileData.posts.map(p => <Post profileInfo={props.ProfileData} text={p.text}\r\n                                                              key={idCrutch++}/>);\r\n    let text = React.createRef();\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [localProfile, setLocalProfile] = useState({});\r\n    useEffect(() => {\r\n        setLocalProfile({...props.ProfileData.profile});\r\n    }, [props.ProfileData.profile])\r\n    let navigate = useNavigate();\r\n\r\n    if (!props.ProfileData.profile) {\r\n        return <Preloader/>\r\n    }\r\n    return (<div className={css.Profile}>\r\n\r\n        <div className={css.Columns}>\r\n            <div className={css.LeftColumn}>\r\n                <img className={css.ProfilePicture}\r\n                     src={props.ProfileData.profile.photos.large ? props.ProfileData.profile.photos.large : NoAvatarPicture}/>\r\n\r\n                <div className={css.UnderPicture}>\r\n                    {(props.myId === props.userId)\r\n                        ? <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n                            <button className={css.UserButton} onClick={() => {\r\n                                if (editMode) props.updateProfileThunkCreator(localProfile);\r\n                                setEditMode(!editMode);\r\n                            }}> {editMode\r\n                                ? <img width={\"40px\"} src={OkButton}/>\r\n                                : <img width={\"40px\"} src={SettingsButton}/>}</button>\r\n                            <label htmlFor={\"avatar\"} className={css.Label}>\r\n                                <img width={\"40px\"} src={ChangeAvaButton}/>\r\n                                <input className={css.AvatarInput} type={\"file\"} id={\"avatar\"} onChange={() => {\r\n                                    let avatar = document.getElementById('avatar').files[0];\r\n                                    props.updateAvatarThunkCreator(avatar);\r\n                                }}/>\r\n                            </label>\r\n                        </div>\r\n                        : <div>\r\n                            <button onClick={()=>follow(localProfile.userId)} className={css.UserButton}><img width={\"40px\"} src={AddFriendButton}/></button>\r\n                            <button onClick={()=>{\r\n                                follow(localProfile.userId);\r\n                                navigate(\"/messages/\"+localProfile.fullName)\r\n                            }} className={css.UserButton}><img width={\"40px\"} src={MessageButton}/></button>\r\n                        </div>}\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div className={css.RightColumn}>\r\n                <div><span className={css.Name}>{props.ProfileData.profile.fullName}</span></div>\r\n                <div className={css.Status}><ProfileStatus status={props.ProfileData.status}\r\n                                                           updateStatus={props.updateStatus}/></div>\r\n\r\n                <div className={css.Info}>\r\n                    {/*about me*/}\r\n                    <div className={css.AboutMe}>\r\n                        <div style={{display: \"inline\"}}>About me:</div>\r\n                        {editMode\r\n                            ? <input className={css.AboutMeInput} style={{display: \"inline\"}} onChange={(event) => {\r\n                                setLocalProfile({...localProfile, aboutMe: event.currentTarget.value})\r\n                            }\r\n                            } type={\"text\"} value={localProfile.aboutMe || \"\"}/>\r\n                            : <div\r\n                                style={{display: \"inline\"}}>{localProfile.aboutMe ?\r\n                                <span>{localProfile.aboutMe}</span> : <span>no info</span>}</div>}\r\n                    </div>\r\n                    {/*looking for a job*/}\r\n                    <div className={css.LookingForAJob}>\r\n                        <div style={{display: \"inline\"}}>Looking for a Job:</div>\r\n                        {editMode\r\n                            ? <input onChange={() => {\r\n                                setLocalProfile({\r\n                                    ...localProfile,\r\n                                    lookingForAJob: !localProfile.lookingForAJob,\r\n                                    lookingForAJobDescription: \"nothing here\"\r\n                                })\r\n                            }} type={\"checkbox\"} checked={localProfile.lookingForAJob}/>\r\n                            : <div style={{display: \"inline\"}}>{localProfile.lookingForAJob ? <span>yes</span> :\r\n                                <span>no</span>}</div>}\r\n                    </div>\r\n                    {/*{vk}*/}\r\n                    <div className={css.Contacts}>\r\n                        <div style={{display: \"inline\"}}>{\"vk: \"}</div>\r\n                        {editMode\r\n                            ? <input style={{display: \"inline\"}} onChange={(event) => {\r\n                                setLocalProfile({\r\n                                    ...localProfile,\r\n                                    contacts: {...localProfile.contacts, vk: event.currentTarget.value}\r\n                                })\r\n                            }\r\n                            } type={\"text\"} value={localProfile.contacts.vk || \"\"}/>\r\n                            : <div\r\n                                style={{display: \"inline\"}}>{localProfile.contacts ? localProfile.contacts.vk ?\r\n                                    <span>{localProfile.contacts.vk}</span> : <span>no info</span> :\r\n                                <span>no info</span>}</div>}\r\n                    </div>\r\n                    {/*github*/}\r\n                    <div className={css.Contacts}>\r\n                        <div style={{display: \"inline\"}}>{\"github: \"}</div>\r\n                        {editMode\r\n                            ? <input style={{display: \"inline\"}} onChange={(event) => {\r\n                                setLocalProfile({\r\n                                    ...localProfile,\r\n                                    contacts: {...localProfile.contacts, github: event.currentTarget.value}\r\n                                })\r\n                            }\r\n                            } type={\"text\"} value={localProfile.contacts.github || \"\"}/>\r\n                            : <div\r\n                                style={{display: \"inline\"}}>{localProfile.contacts ? localProfile.contacts.github ?\r\n                                    <span>{localProfile.contacts.github}</span> : <span>no info</span> :\r\n                                <span>no info</span>}</div>}\r\n                    </div>\r\n                    {/*website*/}\r\n                    <div className={css.Contacts}>\r\n                        <div style={{display: \"inline\"}}>{\"website: \"}</div>\r\n                        {editMode\r\n                            ? <input style={{display: \"inline\"}} onChange={(event) => {\r\n                                setLocalProfile({\r\n                                    ...localProfile,\r\n                                    contacts: {...localProfile.contacts, website: event.currentTarget.value}\r\n                                })\r\n                            }\r\n                            } type={\"text\"} value={localProfile.contacts.website || \"\"}/>\r\n                            : <div\r\n                                style={{display: \"inline\"}}>{localProfile.contacts ? localProfile.contacts.website ?\r\n                                    <span>{localProfile.contacts.website}</span> : <span>no info</span> :\r\n                                <span>no info</span>}</div>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        {(props.myId === props.userId)\r\n            ? <div className={css.PostMenu}>\r\n        <textarea onChange={() => props.textareaChange(text)}\r\n                  ref={text}\r\n                  value={props.ProfileData.newPostText.text}>\r\n        </textarea>\r\n                <button className={css.AddPostButton} onClick={() => {\r\n                    props.addPost();\r\n                }}><img src={SendPostButton} width={\"40px\"}/>\r\n                </button>\r\n            </div>\r\n        : null}\r\n        <div className={css.MyPosts}>\r\n            {postElements}\r\n        </div>\r\n    </div>);\r\n\r\n\r\n    // return (\r\n    //     <div className={css.Profile}>\r\n    //         <div className={css.ProfileName}>{props.ProfileData.profile.fullName}</div>\r\n    //         <img className={css.ProfilePicture}\r\n    //              src={props.ProfileData.profile.photos.large}/>\r\n    //         <br/>\r\n    //         <div>\r\n    //             {props.isOwner && <input type={\"file\"}/>}\r\n    //         </div>\r\n    //         <ProfileStatus status={props.ProfileData.status} updateStatus={props.updateStatus}/>\r\n    //         <br/>\r\n    //         <textarea onChange={() => props.textareaChange(text)}\r\n    //                   ref={text}\r\n    //                   value={props.ProfileData.newPostText.text}>\r\n    //         </textarea>\r\n    //         <br/>\r\n    //         <button onClick={() => {\r\n    //             props.addPost();\r\n    //         }}>Add new post\r\n    //         </button>\r\n    //         <br/>\r\n    //         <div className={css.MyPosts}>\r\n    //             {postElements}\r\n    //         </div>\r\n    //     </div>);\r\n}\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}