{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Philippos\\\\Documents\\\\WebDev\\\\ULTRA_REACT\\\\01\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import{usersAPI,authAPI}from\"../ api/api\";var initValue={id:null,email:null,login:null,loggedIn:false};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initValue;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case\"SET-AUTH\":{var stateCopy=_objectSpread(_objectSpread(_objectSpread({},state),action.loginData),{},{loggedIn:action.loggedIn});return stateCopy;}default:return state;}};export var setAuth=function setAuth(loginData,loggedIn){return{type:\"SET-AUTH\",loginData:loginData,loggedIn:loggedIn};};export var setError=function setError(errorMessage){return{type:\"SET-ERROR-MESSAGE\",errorMessage:errorMessage};};export var setAuthThunkCreator=function setAuthThunkCreator(){return function(dispatch){return usersAPI.getAuthMe().then(function(data){if(data.resultCode===0){var loginData=data.data;dispatch(setAuth(loginData,true));}});};};export var loginThunkCreator=function loginThunkCreator(email,password,rememberMe,setStatus){return function(dispatch){authAPI.login(email,password,rememberMe).then(function(response){dispatch(setError(\"\"));if(response.data.resultCode===0){dispatch(setAuthThunkCreator());}else{setStatus(response.data.messages);}});};};export var logoutThunkCreator=function logoutThunkCreator(){return function(dispatch){authAPI.logout().then(function(response){if(response.data.resultCode===0){var loginData={email:null,id:null,login:null};dispatch(setAuth(loginData,false));}});};};export default authReducer;","map":{"version":3,"sources":["C:/Users/Philippos/Documents/WebDev/ULTRA_REACT/01/src/Redux/auth-reducer.js"],"names":["usersAPI","authAPI","initValue","id","email","login","loggedIn","authReducer","state","action","type","stateCopy","loginData","setAuth","setError","errorMessage","setAuthThunkCreator","dispatch","getAuthMe","then","data","resultCode","loginThunkCreator","password","rememberMe","setStatus","response","messages","logoutThunkCreator","logout"],"mappings":"mJAAA,OAAQA,QAAR,CAAkBC,OAAlB,KAAgC,aAAhC,CAEA,GAAIC,CAAAA,SAAS,CAAG,CACZC,EAAE,CAAE,IADQ,CAEZC,KAAK,CAAE,IAFK,CAGZC,KAAK,CAAE,IAHK,CAIZC,QAAQ,CAAE,KAJE,CAAhB,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAA+B,IAA9BC,CAAAA,KAA8B,2DAAtBN,SAAsB,IAAXO,CAAAA,MAAW,2CAE/C,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK,UAAL,CAAiB,CACb,GAAIC,CAAAA,SAAS,8CACNH,KADM,EAENC,MAAM,CAACG,SAFD,MAGTN,QAAQ,CAAEG,MAAM,CAACH,QAHR,EAAb,CAKA,MAAOK,CAAAA,SAAP,CACH,CACD,QACI,MAAOH,CAAAA,KAAP,CAVR,CAYH,CAdD,CAeA,MAAO,IAAMK,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACD,SAAD,CAAYN,QAAZ,QAA0B,CAACI,IAAI,CAAE,UAAP,CAAmBE,SAAS,CAAEA,SAA9B,CAAyCN,QAAQ,CAACA,QAAlD,CAA1B,EAAhB,CACP,MAAO,IAAMQ,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,YAAD,QAAmB,CAACL,IAAI,CAAE,mBAAP,CAA4BK,YAAY,CAACA,YAAzC,CAAnB,EAAjB,CAEP,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAK,CACpC,MAAO,UAACC,QAAD,CAAa,CACjB,MAAQjB,CAAAA,QAAQ,CAACkB,SAAT,GACFC,IADE,CACG,SAAAC,IAAI,CAAI,CACV,GAAIA,IAAI,CAACC,UAAL,GAAoB,CAAxB,CAA2B,CACvB,GAAIT,CAAAA,SAAS,CAAGQ,IAAI,CAACA,IAArB,CACAH,QAAQ,CAACJ,OAAO,CAACD,SAAD,CAAY,IAAZ,CAAR,CAAR,CACH,CACJ,CANE,CAAR,CAOF,CARD,CASH,CAVM,CAYP,MAAO,IAAMU,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAClB,KAAD,CAAQmB,QAAR,CAAkBC,UAAlB,CAA8BC,SAA9B,CAA2C,CACxE,MAAO,UAACR,QAAD,CAAa,CAChBhB,OAAO,CAACI,KAAR,CAAcD,KAAd,CAAqBmB,QAArB,CAA+BC,UAA/B,EACKL,IADL,CACU,SAAAO,QAAQ,CAAG,CACbT,QAAQ,CAACH,QAAQ,CAAC,EAAD,CAAT,CAAR,CACA,GAAIY,QAAQ,CAACN,IAAT,CAAcC,UAAd,GAA6B,CAAjC,CAAmC,CAC/BJ,QAAQ,CAACD,mBAAmB,EAApB,CAAR,CACH,CAFD,IAGI,CACAS,SAAS,CAACC,QAAQ,CAACN,IAAT,CAAcO,QAAf,CAAT,CACH,CACJ,CATL,EAUH,CAXD,CAYH,CAbM,CAcP,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAK,CACnC,MAAO,UAACX,QAAD,CAAa,CAChBhB,OAAO,CAAC4B,MAAR,GACKV,IADL,CACU,SAAAO,QAAQ,CAAG,CACb,GAAIA,QAAQ,CAACN,IAAT,CAAcC,UAAd,GAA6B,CAAjC,CAAmC,CAC/B,GAAIT,CAAAA,SAAS,CAAG,CAACR,KAAK,CAAE,IAAR,CAAcD,EAAE,CAAC,IAAjB,CAAuBE,KAAK,CAAC,IAA7B,CAAhB,CACAY,QAAQ,CAACJ,OAAO,CAACD,SAAD,CAAY,KAAZ,CAAR,CAAR,CACH,CACJ,CANL,EAOH,CARD,CASH,CAVM,CAYP,cAAeL,CAAAA,WAAf","sourcesContent":["import {usersAPI, authAPI} from \"../ api/api\";\r\n\r\nlet initValue = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    loggedIn: false,\r\n};\r\nconst authReducer = (state = initValue, action) => {\r\n\r\n    switch (action.type) {\r\n        case \"SET-AUTH\": {\r\n            let stateCopy = {\r\n                ...state,\r\n                ...action.loginData,\r\n                loggedIn: action.loggedIn,\r\n            }\r\n            return stateCopy;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport const setAuth = (loginData, loggedIn) => ({type: \"SET-AUTH\", loginData: loginData, loggedIn:loggedIn});\r\nexport const setError = (errorMessage) => ({type: \"SET-ERROR-MESSAGE\", errorMessage:errorMessage});\r\n\r\nexport const setAuthThunkCreator = () =>{\r\n    return (dispatch) =>{\r\n       return  usersAPI.getAuthMe()\r\n            .then(data => {\r\n                if (data.resultCode === 0) {\r\n                    let loginData = data.data;\r\n                    dispatch(setAuth(loginData, true));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const loginThunkCreator = (email, password, rememberMe, setStatus) =>{\r\n    return (dispatch) =>{\r\n        authAPI.login(email, password, rememberMe)\r\n            .then(response =>{\r\n                dispatch(setError(\"\"));\r\n                if (response.data.resultCode === 0){\r\n                    dispatch(setAuthThunkCreator());\r\n                }\r\n                else{\r\n                    setStatus(response.data.messages)\r\n                }\r\n            })\r\n    }\r\n}\r\nexport const logoutThunkCreator = () =>{\r\n    return (dispatch) =>{\r\n        authAPI.logout()\r\n            .then(response =>{\r\n                if (response.data.resultCode === 0){\r\n                    let loginData = {email: null, id:null, login:null};\r\n                    dispatch(setAuth(loginData, false));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport default authReducer;"]},"metadata":{},"sourceType":"module"}